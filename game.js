const config = {type: Phaser.AUTO,parent: "game-container",width: 800,height: 600,physics: {default: "arcade",arcade: {gravity: { y: 0 },debug: false}},scene: {preload: preload,create: create,update: update},scale: {mode: Phaser.Scale.FIT,autoCenter: Phaser.Scale.CENTER_BOTH}};const game = new Phaser.Game(config);let player;let enemies;let tapes;let cursors;let score = 0;let scoreText;let lives = 3;let livesText;let level = 1;let levelText;let gameOver = false;let enemySpeed = 150;let backgroundVideo;function preload() {this.load.image("player", "assets/PMG.png");this.load.image("enemy", "assets/enemy.png");this.load.image("tape", "assets/tape.png");this.load.video("sky", "videos/sky_background.mp4", "loadeddata", false, true);this.load.audio("background_music", "sounds/background_music.mp3");this.load.audio("throw", "sounds/throw.mp3");this.load.audio("hit", "sounds/hit.mp3");this.load.audio("ouch", "sounds/ouch.mp3");this.load.audio("levelup", "sounds/levelup.mp3");}function create() {this.cameras.main.setBackgroundColor("#000000");player = this.add.sprite(400, 300, "player");player.setScale(0.3);enemies = this.physics.add.group();tapes = this.physics.add.group();this.physics.add.overlap(tapes, enemies, hitEnemy, null, this);scoreText = this.add.text(16, 16, "ניקוד: 0", { fontSize: "32px", fill: "#fff", fontFamily: "Arial" });livesText = this.add.text(16, 56, "❤️".repeat(lives), { fontSize: "32px", fill: "#fff" });levelText = this.add.text(650, 16, "שלב: 1", { fontSize: "32px", fill: "#fff", fontFamily: "Arial" });cursors = this.input.keyboard.createCursorKeys();this.input.on("pointerdown", function(pointer) {movePlayerTo(pointer.x);shootTape();});spawnEnemy();}function update() {if (gameOver) {return;}if (cursors.left.isDown) {player.setVelocityX(-300);} else if (cursors.right.isDown) {player.setVelocityX(300);} else {player.setVelocityX(0);}if (cursors.space.isDown && Phaser.Input.Keyboard.JustDown(cursors.space)) {shootTape();}}function movePlayerTo(x) {const newX = Phaser.Math.Clamp(x, player.width/2, game.config.width - player.width/2);player.x = newX;}function shootTape() {const tape = tapes.create(player.x, player.y, "tape");tape.setScale(0.3);tape.setVelocityY(-400);this.sound.play("throw");this.time.delayedCall(2000, () => {tape.destroy();});}function spawnEnemy() {if (gameOver) return;const x = Phaser.Math.Between(100, 700);const enemy = enemies.create(x, -50, "enemy");enemy.setScale(0.4);const speed = enemySpeed + (level * 50);enemy.setVelocityY(speed);this.tweens.add({targets: enemy,angle: 360,duration: 2000,repeat: -1});this.time.delayedCall(6000, () => {if (enemy.active) {enemy.destroy();loseLife();spawnEnemy();}});}function hitEnemy(tape, enemy) {tape.destroy();enemy.destroy();this.sound.play("hit");score += 10 * level;scoreText.setText("ניקוד: " + score);if (score >= level * 100) {levelUp();}spawnEnemy();}function loseLife() {lives--;livesText.setText("❤️".repeat(lives));this.sound.play("ouch");if (lives <= 0) {endGame();}}function levelUp() {level++;levelText.setText("שלב: " + level);this.sound.play("levelup");this.tweens.add({targets: levelText,scaleX: 1.5,scaleY: 1.5,duration: 200,yoyo: true});}function endGame() {gameOver = true;const gameOverText = this.add.text(400, 300, "המשחק נגמר!
לחץ כאן להתחלה מחדש", {fontSize: "64px",fill: "#fff",fontFamily: "Arial",align: "center"});gameOverText.setOrigin(0.5);gameOverText.setInteractive();gameOverText.on("pointerdown", () => {this.scene.restart();score = 0;lives = 3;level = 1;gameOver = false;});}
